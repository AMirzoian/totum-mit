{
    "table": "tables",
    "children": [
        {
            "name": "RECALC",
            "table": "tables",
            "inVars": {
                "modify": {
                    "3": {
                        "top": "1",
                        "open": "{\"table\": \"tables_fields\", \"filter\": [{\"field\": \"f_table_categories\", \"value\": \"2\", \"operator\": \"=\"}, {\"field\": \"f_table\", \"value\": 9, \"operator\": \"=\"}]}",
                        "sort": "20",
                        "panel": true,
                        "title": "\u0420\u043e\u043b\u0438",
                        "actual": "weak",
                        "indexes": [],
                        "category": "1",
                        "deleting": "delete",
                        "csv_roles": [],
                        "edit_roles": [
                            "1"
                        ],
                        "insertable": true,
                        "main_field": null,
                        "order_desc": false,
                        "read_roles": [],
                        "row_format": "f1=:",
                        "description": "",
                        "duplicating": false,
                        "fields_sets": null,
                        "order_field": null,
                        "order_roles": [],
                        "delete_roles": [],
                        "delete_timer": "0",
                        "insert_roles": [],
                        "on_duplicate": "",
                        "table_format": "f1=:",
                        "tree_node_id": "3",
                        "csv_edit_roles": [],
                        "tree_off_roles": [],
                        "duplicate_roles": [],
                        "new_row_in_sort": false,
                        "fields_actuality": "2018-06-14 00:00",
                        "with_order_field": false,
                        "recalc_in_reorder": false,
                        "cycles_access_type": null,
                        "calculate_by_columns": false
                    }
                }
            },
            "times": 0.169181,
            "result": "changed",
            "children": [
                {
                    "recalculate": "filter"
                },
                {
                    "recalculate": "column",
                    "children": [
                        {
                            "field": "top",
                            "cType": "code",
                            "action": "modify",
                            "itemId": 3,
                            "times": 0.010024,
                            "result": "1",
                            "children": [
                                {
                                    "name": "=",
                                    "code": "if(condition:#type=\"calcs\";then:\"\";else:$tree)",
                                    "times": 0.010008,
                                    "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                    "children": [
                                        {
                                            "name": "condition1",
                                            "code": "#type=\"calcs\"",
                                            "#type": "simple",
                                            "times": 3.2e-5,
                                            "result": false
                                        },
                                        {
                                            "name": "else",
                                            "code": "$tree",
                                            "times": 0.009932,
                                            "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                            "children": [
                                                {
                                                    "name": "$tree",
                                                    "code": "select(table:'tree';field:'top';where:'id'=#tree_node_id)",
                                                    "#tree_node_id": "3",
                                                    "times": 0.009916,
                                                    "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                                    "children": [
                                                        {
                                                            "name": "table",
                                                            "code": "'tree'",
                                                            "times": 8.0e-6,
                                                            "result": "tree"
                                                        },
                                                        {
                                                            "name": "field",
                                                            "code": "'top'",
                                                            "times": 6.0e-6,
                                                            "result": "top"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "field": "with_order_field",
                    "cType": "action",
                    "itemId": 3,
                    "times": 0.043086,
                    "result": null,
                    "children": [
                        {
                            "name": "=",
                            "code": "if(condition:#with_order_field=true;then:$ifTrue;else:$ifFalse)",
                            "times": 0.040956,
                            "result": null,
                            "children": [
                                {
                                    "name": "condition1",
                                    "code": "#with_order_field=true",
                                    "#with_order_field": false,
                                    "times": 3.1e-5,
                                    "result": false
                                },
                                {
                                    "name": "else",
                                    "code": "$ifFalse",
                                    "times": 0.04088,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$ifFalse",
                                            "code": "set(table:$#nti;field:'order_field'=\"\";field:'recalc_in_reorder'=false;field:'new_row_in_sort'=false;where:'id'=#id)",
                                            "#id": 3,
                                            "times": 0.040867,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "table",
                                                    "code": "$#nti",
                                                    "$#nti": 1,
                                                    "times": 1.0e-5,
                                                    "result": 1
                                                },
                                                {
                                                    "name": "RECALC",
                                                    "table": "tables",
                                                    "inVars": {
                                                        "modify": {
                                                            "3": {
                                                                "order_field": "",
                                                                "recalc_in_reorder": false,
                                                                "new_row_in_sort": false
                                                            }
                                                        }
                                                    },
                                                    "times": 0.014909,
                                                    "result": "no changed",
                                                    "children": [
                                                        {
                                                            "recalculate": "filter"
                                                        },
                                                        {
                                                            "recalculate": "column",
                                                            "children": [
                                                                {
                                                                    "field": "top",
                                                                    "cType": "code",
                                                                    "action": "modify",
                                                                    "itemId": 3,
                                                                    "times": 0.006975,
                                                                    "result": "1",
                                                                    "children": [
                                                                        {
                                                                            "name": "=",
                                                                            "code": "if(condition:#type=\"calcs\";then:\"\";else:$tree)",
                                                                            "times": 0.00695,
                                                                            "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                                                            "children": [
                                                                                {
                                                                                    "name": "condition1",
                                                                                    "code": "#type=\"calcs\"",
                                                                                    "#type": "simple",
                                                                                    "times": 1.9e-5,
                                                                                    "result": false
                                                                                },
                                                                                {
                                                                                    "name": "else",
                                                                                    "code": "$tree",
                                                                                    "times": 0.006894,
                                                                                    "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "$tree",
                                                                                            "code": "select(table:'tree';field:'top';where:'id'=#tree_node_id)",
                                                                                            "#tree_node_id": "3",
                                                                                            "times": 0.006884,
                                                                                            "error": "\u0422\u0430\u0431\u043b\u0438\u0446\u0430 [[tree]] \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",
                                                                                            "children": [
                                                                                                {
                                                                                                    "name": "table",
                                                                                                    "code": "'tree'",
                                                                                                    "times": 4.0e-6,
                                                                                                    "result": "tree"
                                                                                                },
                                                                                                {
                                                                                                    "name": "field",
                                                                                                    "code": "'top'",
                                                                                                    "times": 3.0e-6,
                                                                                                    "result": "top"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "field": "edit_roles",
                    "cType": "action",
                    "itemId": 3,
                    "times": 0.015998,
                    "result": null,
                    "children": [
                        {
                            "name": "=",
                            "code": "while(action:$setAdd;action:$setMin)",
                            "times": 0.01599,
                            "result": null,
                            "children": [
                                {
                                    "name": "action1",
                                    "code": "$setAdd",
                                    "times": 0.015858,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setAdd",
                                            "code": "if(condition:$add!=$#lc;then:$setAdd2)",
                                            "times": 0.015832,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$add!=$#lc",
                                                    "$#lc": [],
                                                    "times": 6.4e-5,
                                                    "result": true,
                                                    "children": [
                                                        {
                                                            "name": "$add",
                                                            "code": "listMinus(list:#edit_roles;list:#old.edit_roles)",
                                                            "times": 3.9e-5,
                                                            "result": [
                                                                "1"
                                                            ],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#edit_roles",
                                                                    "#edit_roles": [
                                                                        "1"
                                                                    ],
                                                                    "times": 1.1e-5,
                                                                    "result": [
                                                                        "1"
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.edit_roles",
                                                                    "#old.edit_roles": null,
                                                                    "times": 1.0e-5,
                                                                    "result": null
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "then",
                                                    "code": "$setAdd2",
                                                    "times": 0.015749,
                                                    "result": null,
                                                    "children": [
                                                        {
                                                            "name": "$setAdd2",
                                                            "code": "setList(table:'roles';field:'tables'+#id;where:'id'=$add;where:'tables'!=#id)",
                                                            "#id": 3,
                                                            "times": 0.015739,
                                                            "result": null,
                                                            "children": [
                                                                {
                                                                    "name": "table",
                                                                    "code": "'roles'",
                                                                    "times": 4.0e-6,
                                                                    "result": "roles"
                                                                },
                                                                {
                                                                    "name": "RECALC",
                                                                    "table": "roles",
                                                                    "inVars": {
                                                                        "modify": {
                                                                            "params": {
                                                                                "tables": {}
                                                                            }
                                                                        }
                                                                    },
                                                                    "times": 2.3e-5,
                                                                    "result": "no changed",
                                                                    "children": [
                                                                        {
                                                                            "recalculate": "column"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "action2",
                                    "code": "$setMin",
                                    "times": 9.7e-5,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setMin",
                                            "code": "if(condition:$min!=$#lc;then:$setMin2)",
                                            "times": 7.5e-5,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$min!=$#lc",
                                                    "$#lc": [],
                                                    "times": 5.3e-5,
                                                    "result": false,
                                                    "children": [
                                                        {
                                                            "name": "$min",
                                                            "code": "listMinus(list:#old.edit_roles;list:#edit_roles)",
                                                            "times": 3.0e-5,
                                                            "result": [],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.edit_roles",
                                                                    "#old.edit_roles": null,
                                                                    "times": 7.0e-6,
                                                                    "result": null
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#edit_roles",
                                                                    "#edit_roles": [
                                                                        "1"
                                                                    ],
                                                                    "times": 6.0e-6,
                                                                    "result": [
                                                                        "1"
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "field": "read_roles",
                    "cType": "action",
                    "itemId": 3,
                    "times": 0.000117,
                    "result": null,
                    "children": [
                        {
                            "name": "=",
                            "code": "while(action:$setAdd;action:$setMin)",
                            "times": 0.000111,
                            "result": null,
                            "children": [
                                {
                                    "name": "action1",
                                    "code": "$setAdd",
                                    "times": 5.6e-5,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setAdd",
                                            "code": "if(condition:$add!=$#lc;then:$setAdd2)",
                                            "times": 5.1e-5,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$add!=$#lc",
                                                    "$#lc": [],
                                                    "times": 4.3e-5,
                                                    "result": false,
                                                    "children": [
                                                        {
                                                            "name": "$add",
                                                            "code": "listMinus(list:#read_roles;list:#old.read_roles)",
                                                            "times": 3.5e-5,
                                                            "result": [],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#read_roles",
                                                                    "#read_roles": [],
                                                                    "times": 1.1e-5,
                                                                    "result": []
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.read_roles",
                                                                    "#old.read_roles": null,
                                                                    "times": 8.0e-6,
                                                                    "result": null
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "action2",
                                    "code": "$setMin",
                                    "times": 4.1e-5,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setMin",
                                            "code": "if(condition:$min!=$#lc;then:$setMin2)",
                                            "times": 3.6e-5,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$min!=$#lc",
                                                    "$#lc": [],
                                                    "times": 2.8e-5,
                                                    "result": false,
                                                    "children": [
                                                        {
                                                            "name": "$min",
                                                            "code": "listMinus(list:#old.read_roles;list:#read_roles)",
                                                            "times": 2.1e-5,
                                                            "result": [],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.read_roles",
                                                                    "#old.read_roles": null,
                                                                    "times": 4.0e-6,
                                                                    "result": null
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#read_roles",
                                                                    "#read_roles": [],
                                                                    "times": 4.0e-6,
                                                                    "result": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "field": "tree_off_roles",
                    "cType": "action",
                    "itemId": 3,
                    "times": 0.000134,
                    "result": null,
                    "children": [
                        {
                            "name": "=",
                            "code": "while(action:$setAdd;action:$setMin)",
                            "times": 0.00013,
                            "result": null,
                            "children": [
                                {
                                    "name": "action1",
                                    "code": "$setAdd",
                                    "times": 7.9e-5,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setAdd",
                                            "code": "if(condition:$add!=$#lc;then:$setAdd2)",
                                            "times": 7.4e-5,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$add!=$#lc",
                                                    "$#lc": [],
                                                    "times": 6.7e-5,
                                                    "result": false,
                                                    "children": [
                                                        {
                                                            "name": "$add",
                                                            "code": "listMinus(list:#tree_off_roles;list:#old.tree_off_roles)",
                                                            "times": 4.6e-5,
                                                            "result": [],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#tree_off_roles",
                                                                    "#tree_off_roles": [],
                                                                    "times": 9.0e-6,
                                                                    "result": []
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.tree_off_roles",
                                                                    "#old.tree_off_roles": null,
                                                                    "times": 2.1e-5,
                                                                    "result": null
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "action2",
                                    "code": "$setMin",
                                    "times": 4.0e-5,
                                    "result": null,
                                    "children": [
                                        {
                                            "name": "$setMin",
                                            "code": "if(condition:$min!=$#lc;then:$setMin2)",
                                            "times": 3.5e-5,
                                            "result": null,
                                            "children": [
                                                {
                                                    "name": "condition1",
                                                    "code": "$min!=$#lc",
                                                    "$#lc": [],
                                                    "times": 2.7e-5,
                                                    "result": false,
                                                    "children": [
                                                        {
                                                            "name": "$min",
                                                            "code": "listMinus(list:#old.tree_off_roles;list:#tree_off_roles)",
                                                            "times": 2.2e-5,
                                                            "result": [],
                                                            "children": [
                                                                {
                                                                    "name": "list",
                                                                    "code": "#old.tree_off_roles",
                                                                    "#old.tree_off_roles": null,
                                                                    "times": 4.0e-6,
                                                                    "result": null
                                                                },
                                                                {
                                                                    "name": "list",
                                                                    "code": "#tree_off_roles",
                                                                    "#tree_off_roles": [],
                                                                    "times": 4.0e-6,
                                                                    "result": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}